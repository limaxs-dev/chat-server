# Project Info
quarkus.application.name=nexus-chat-engine
quarkus.http.port=8080

# Virtual Threads for REST
quarkus.rest.blocking-default-level=VIRTUAL_THREAD

# Database: JDBC (REST/Hibernate ORM)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USERNAME:myuser}
quarkus.datasource.password=${DB_PASSWORD:postgres}
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/nexuschat}
quarkus.datasource.jdbc.max-size=20
quarkus.datasource.jdbc.min-size=5

# Database: Reactive (WebSockets/Hibernate Reactive)
quarkus.datasource.reactive.url=${REACTIVE_DB_URL:postgresql://localhost:5432/nexuschat}
quarkus.datasource.reactive.max-size=30

# Hibernate Config
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-reactive.database.generation=none

# Redis Config
quarkus.redis.hosts=redis://localhost:6379
quarkus.redis.timeout=10s

# Security: Smallrye JWT (RSA)
quarkus.smallrye-jwt.enabled=true
quarkus.smallrye-jwt.auth-mechanism=bearer
mp.jwt.verify.publickey.location=keys/public-key.pem
mp.jwt.verify.issuer=nexus-chat-engine

# OpenAPI & Swagger
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.smallrye-openapi.path=/openapi
quarkus.smallrye-openapi.security-scheme=jwt

# Logging
quarkus.log.level=INFO
# Development profile: DEBUG logging
%dev.quarkus.log.category."tech.limaxs.chat".level=DEBUG
# Production profile: INFO logging
%prod.quarkus.log.category."tech.limaxs.chat".level=INFO
quarkus.log.category."tech.limaxs.chat".level=INFO

# MinIO Configuration
minio.endpoint=${MINIO_ENDPOINT:http://localhost:9000}
minio.access-key=${MINIO_ACCESS_KEY:admin}
minio.secret-key=${MINIO_SECRET_KEY:password123}
minio.bucket.name=${MINIO_BUCKET:development}
minio.region=${MINIO_REGION:us-east-1}
minio.upload.url-expiry-seconds=3600
minio.download.url-expiry-seconds=3600

# Scheduler Configuration
quarkus.scheduler.enabled=true

# File Cleanup Configuration
file.cleanup.confirmation-timeout-hours=24
file.cleanup.retention-days=30
file.cleanup.enabled=true

# Development: Run every hour for quick feedback
file.cleanup.unconfirmed-cron=0 0 * * * ?
file.cleanup.expired-cron=0 0 * * * ?

# Production: Run daily at night (uncomment for production)
# file.cleanup.unconfirmed-cron=0 0 2 * * ?
# file.cleanup.expired-cron=0 0 3 * * ?

# Archive Configuration
archive.admin.enabled=true
archive.audit.retention-years=7

# CORS Configuration
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=http://localhost:4200,http://127.0.0.1:4200,http://192.168.100.6:4200
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=*
quarkus.http.cors.exposed-headers=*
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true
